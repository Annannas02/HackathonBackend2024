document.addEventListener("DOMContentLoaded", () => {
    const searchInput = document.getElementById("search-input");
    const domainFilter = document.getElementById("article-domain-options"); // Reference the dropdown
    const resultsContainer = document.getElementById("results-container");

    async function fetchFilteredArticles(token, payload) {
        // Ensure the payload is valid
        if (!payload || !payload.title || !payload.category_id) {
            throw new Error("Payload must include 'title' and 'category_id'.");
        }
    
        const url = "https://36bd-77-89-208-34.ngrok-free.app/api/articles/search/";
    
        try {
            // Perform the fetch request
            const response = await fetch(url, {
                method: "POST",
                headers: {
                    "Authorization": `Bearer ${token}`,
                    "Content-Type": "application/json",
                },
                body: JSON.stringify(payload),
            });
    
            // Check if the response is successful
            if (!response.ok) {
                const errorData = await response.json();
                console.error("Error fetching articles:", errorData);
                throw new Error(`Error fetching articles: ${errorData.message || "Unknown error"}`);
            }
    
            // Parse and return the JSON response
            const articles = await response.json();
    
            // Log the first entry in the response to the console
            if (Array.isArray(articles) && articles.length > 0) {
                console.log("First article:", articles[0]);
            } else {
                console.log("No articles returned.");
            }
    
            return articles;
        } catch (error) {
            console.error("Error during fetch:", error);
            throw new Error("An error occurred while fetching articles. Check the console for details.");
        }
    }

    async function articleSearch() {
        const query = searchInput.value.trim(); // Get the trimmed search query
        
        const selectedDomain = domainFilter.value || "All"; // Default category to "All" if not selected
        
        const accessToken = localStorage.getItem("access_token"); // Retrieve the token from local storage
        if (!accessToken) {
            alert("Access token is missing. Please log in.");
            console.error("Access token missing.");
            return;
        }
    
        // Prepare the payload
        const payload = {
            title: query || "a", // Ensure title is non-null
            category_id: translateCategoryToInt(domainFilter.value), // Pass the selected category
        };

        function translateCategoryToInt(category) {
            // Map of categories to integers
            const categoryMap = {
                "Physics": 1,
                "Mathematics": 2,
                "Computer Science": 3,
                "Quantitative Biology": 4,
                "Statistics": 6,
            };
        
            // Return the corresponding integer, or default to "All"
            return categoryMap[category] || "All";
        }
    
        try {
            // Fetch filtered articles from the backend
            const filteredArticles = await fetchFilteredArticles(accessToken, payload);
    
            // Display the results
            displayResults(filteredArticles);
        } catch (error) {
            console.error("Error fetching articles:", error);
            alert("An error occurred while fetching articles. Check the console for details.");
        }
    }

    function displayResults(results) {
        resultsContainer.innerHTML = ""; // Clear previous results
        document.getElementById("homepage-content-frame").style.height="auto";

        if (results.length === 0) {
            const textOptions = [
                "Zero results. But hey, you’re still searching—and that’s something!",
                "Well, that didn’t quite go as planned. But hey, it’s a fresh start!",
                "Looks like the universe isn’t cooperating this time. Keep looking!",
                "Well, this is awkward. No results this time. At least you tried!",
                "Not a single match, huh? Well, that’s a first.",
                "Hmm, nothing here. I guess you’ll have to try harder next time."
            ];

            const randomText = textOptions[Math.floor(Math.random() * textOptions.length)];
            const divElement = document.getElementById("dialogue-box__text-container");
            document.getElementById("dialogue-box__text-container").style.display = "block";
            document.getElementById("dialogue-box").style.display = "block";

            if (divElement) {
                divElement.textContent = randomText;
            }

            return;
        }

        const textOptions = [
            "Here are the results. No need to thank me!",
            "Well, well, look who finally found something interesting.",
            "Well, aren’t you clever? Took you long enough to find this.",
            "A rare moment of brilliance. Let’s see if these articles are worth it.",
            "You’re welcome. Another brilliant find, just as I promised."
        ];

        const randomText = textOptions[Math.floor(Math.random() * textOptions.length)];
        const divElement = document.getElementById("dialogue-box__text-container");
        divElement.style.display = "block";

        document.getElementById("dialogue-box").style.display = "block";
        divElement.textContent = randomText;

        results.forEach(item => {
            const resultBox = document.createElement("div");
            resultBox.classList.add("random-box");
            console.log("id ",item.domain);
            const categorySVG = getCategorySVG(getRandomDomain(item.domain) || "Default");

            resultBox.innerHTML = `
                <div class="article-box">
                    <div class="article-title">${item.title}</div>
                    <hr class="article-line">
                    <div class="article-abstract text">${item.summary}</div>
                    <div class="article-date">
    Created: ${formatDate(item.publish_date)} | Updated: ${formatDate(item.modify_date)}
</div>
                    ${categorySVG}
                </div>
            `;

            function getRandomDomain(domain) {
                // List of predefined domains
                const domains = [
                    "Physics",
                    "Mathematics",
                    "Computer Science",
                    "Quantitative Biology",
                    "Quantitative Finance",
                    "Statistics",
                    "Economics",
                    "Engineering"
                ];
            
                // If the provided domain exists in the list, use it
                if (domains.includes(domain)) {
                    return domain;
                }
            
                // If the provided domain is not in the list, return a random one
                const randomIndex = Math.floor(Math.random() * domains.length);
                return domains[randomIndex];
            }
            

            function formatDate(dateString) {
                if (!dateString) return "N/A"; // Handle cases where the date is missing
                const date = new Date(dateString);
                const day = String(date.getDate()).padStart(2, '0'); // Ensure 2-digit day
                const month = String(date.getMonth() + 1).padStart(2, '0'); // Months are zero-based
                const year = date.getFullYear();
                return `${day}/${month}/${year}`; // Format as DD/MM/YYYY
            }

            resultsContainer.appendChild(resultBox);
        });
    }

        function getCategorySVG(category) {
            switch (category) {
                case "Physics":
                    return `<svg  class="svg-style article-box__svg" preserveAspectRatio="xMidYMid meet" viewBox="0 0 36 36">
                    <title>atom-solid</title>
                    <path d="M24.23,11.71a39.14,39.14,0,0,0-4.57-3.92,22.86,22.86,0,0,1,3.48-1.72c.32-.12.62-.21.92-.3a2.28,2.28,0,0,0,3.81-.46,3.31,3.31,0,0,1,1.92.84c1.19,1.19,1.22,3.59.1,6.58.49.65.94,1.31,1.35,2,.17-.4.35-.79.49-1.18,1.47-3.85,1.28-7-.53-8.78a5.29,5.29,0,0,0-3.33-1.44,2.29,2.29,0,0,0-4.31.54c-.37.11-.74.22-1.13.37a25.79,25.79,0,0,0-4.57,2.35A26.21,26.21,0,0,0,13.28,4.2c-3.85-1.46-7-1.28-8.77.53C2.85,6.4,2.58,9.17,3.68,12.59a2.28,2.28,0,0,0,1.59,3.67c.32.61.67,1.22,1.06,1.82A25.54,25.54,0,0,0,4,22.66c-1.47,3.84-1.28,7,.53,8.77a5.63,5.63,0,0,0,4.12,1.51,13.34,13.34,0,0,0,4.65-1,26.21,26.21,0,0,0,4.58-2.35A25.79,25.79,0,0,0,22.43,32a14.16,14.16,0,0,0,3.65.9A2.3,2.3,0,0,0,30.46,32a4.55,4.55,0,0,0,.74-.57c1.81-1.81,2-4.93.53-8.77A32.68,32.68,0,0,0,24.23,11.71ZM12.57,30.09c-3,1.15-5.45,1.13-6.65-.08s-1.23-3.62-.07-6.64a22.77,22.77,0,0,1,1.71-3.48,40.19,40.19,0,0,0,3.92,4.56c.43.43.87.85,1.31,1.25q.9-.46,1.83-1.05c-.58-.52-1.16-1-1.72-1.61a34,34,0,0,1-5.74-7.47A2.29,2.29,0,0,0,5.5,11.69h0c-.75-2.5-.62-4.49.43-5.54a3.72,3.72,0,0,1,2.72-.92,11.4,11.4,0,0,1,3.93.84,22.86,22.86,0,0,1,3.48,1.72,39.14,39.14,0,0,0-4.57,3.92c-.44.44-.87.9-1.29,1.36a20.27,20.27,0,0,0,1,1.85c.54-.61,1.09-1.21,1.68-1.8a36.33,36.33,0,0,1,5-4.17,36.88,36.88,0,0,1,4.95,4.17,36.26,36.26,0,0,1,4.17,5,37,37,0,0,1-4.17,5A30.68,30.68,0,0,1,12.57,30.09ZM29.79,30l-.16.13a2.27,2.27,0,0,0-3.5.72,12.57,12.57,0,0,1-3-.77,22,22,0,0,1-3.48-1.72,39.14,39.14,0,0,0,4.57-3.92,38.26,38.26,0,0,0,3.92-4.56,22.88,22.88,0,0,1,1.72,3.48C31,26.39,31,28.81,29.79,30Z" class="clr-i-solid clr-i-solid-path-1"/><circle cx="17.99" cy="18.07" r="3.3" transform="translate(-2.66 3.11) rotate(-9.22)" class="clr-i-solid clr-i-solid-path-2"/>
                    <rect />
                </svg>`;
                case "Mathematics":
                    return `<svg class="svg-style article-box__svg"  viewBox="10.5 10.5 567.42 547.88">

                    <path style=" stroke:none" d="M 10.499686,177.03840 L 31.174931,178.56990 C 52.615925,154.32116 61.039171,82.595924 187.38789,96.634671 C 182.79339,403.95560 48.021426,436.37234 56.444675,499.41907 C 59.507674,535.15406 87.840417,557.10556 118.47041,558.38181 C 215.21014,555.06356 210.87089,424.63084 240.99038,95.868921 L 365.80760,95.868921 C 359.17110,211.75239 341.04836,327.63586 339.00636,441.22208 C 340.53786,516.77606 386.48285,557.10556 446.97708,557.61606 C 546.52456,560.93431 577.92030,444.79558 577.92030,395.27709 L 556.47931,395.27710 C 554.43731,436.11709 534.78306,465.47083 492.92207,467.25758 C 378.82535,468.78908 441.61683,266.63113 442.38258,97.400421 L 577.92030,98.166171 L 577.15455,11.636437 C 13.807491,8.9075799 85.312284,-2.1366151 10.499686,177.03840 z"/>
                    
                    </svg>`;
                case "Computer Science":
                    return `<svg class="svg-style article-box__svg" shape-rendering="geometricPrecision" text-rendering="geometricPrecision" image-rendering="optimizeQuality" fill-rule="evenodd" clip-rule="evenodd" viewBox="0 0 513.89 512.4">
                    <g id="Layer_x0020_1">
                    <metadata id="CorelCorpID_0Corel-Layer"/>
                    <path fill-rule="nonzero" d="M115.82 496.61c16.08,-21.9 23.85,-41.68 27.08,-62.84 2.24,-14.62 2.4,-30.2 1.65,-47.69l8.78 0.45 0 -0.05c5.71,0.41 11.56,0.59 17.29,0.88l0.53 0.02c0.7,18.07 0.42,34.48 -2.02,50.43 -3.88,25.36 -13.04,48.86 -31.93,74.59l-21.38 -15.79zm-46.9 -123.72l59.4 59.4 -5.01 23.84 -76.66 -76.66c-10.51,4.1 -20.72,9.65 -30.56,17.11l-16.09 -21.08c49.36,-37.43 102.43,-34.69 155.59,-31.95 6,0.31 12,0.62 16.82,0.83 21.05,0.9 41.94,1.07 61.99,-2.26l-52.97 -52.97 5 -23.85 71.12 71.11c14.12,-4.75 27.91,-11.99 41.25,-22.85l-99.68 -99.67c-17.99,19.58 -26.37,41.02 -29.83,63.81 -2.41,15.85 -2.49,32.61 -1.73,49.96l-10.21 -0.52c-0.58,-0.06 -1.16,-0.09 -1.76,-0.09 -4.88,-0.25 -9.75,-0.5 -14.63,-0.72 -0.72,-17.93 -0.51,-35.48 2.1,-52.67 4.3,-28.35 15.02,-55.1 38.41,-79.69 24.96,-26.25 51.67,-39.99 79.32,-46.87 21.97,-5.47 44.11,-6.51 66.29,-6.09 0.31,5.24 0.67,10.62 1.06,16.17 0.25,3.49 0.49,6.96 0.72,10.42 -16.87,-0.4 -33.55,0.02 -49.68,2.74l54.11 54.11 -5.01 23.84 -72.21 -72.21c-14.44,4.9 -28.55,12.41 -42.17,23.74l99.82 99.82c18.71,-19.89 27.35,-41.71 30.88,-64.93 3.72,-24.46 1.9,-51.11 -0.04,-78.72 -2.19,-31.17 -3.56,-56.83 0.2,-81.4 3.88,-25.35 13.04,-48.86 31.93,-74.59l21.37 15.8c-16.07,21.9 -23.84,41.68 -27.08,62.83 -3.35,21.93 -2.04,46.04 0.02,75.45 2.05,29.19 3.97,57.37 -0.17,84.67 -4.31,28.35 -15.02,55.09 -38.41,79.69 -24.96,26.25 -51.67,39.99 -79.32,46.87 -27.09,6.74 -54.43,6.76 -81.79,5.59 -6.48,-0.28 -11.8,-0.55 -17.11,-0.83 -28.93,-1.49 -57.83,-2.98 -85.28,2.82zm373.73 -232.9l-57.36 -57.36 5.01 -23.84 74.92 74.92c11.21,-4.17 22.11,-9.95 32.58,-17.89l16.09 21.09c-39.99,30.31 -82.39,34.28 -125.31,33.23 -0.36,-5.72 -0.76,-11.46 -1.16,-17.25 -0.23,-3.19 -0.44,-6.31 -0.64,-9.38 18.96,0.52 37.72,0.04 55.87,-3.52z"/>
                    </g>
                    </svg>`;
                case "Quantitative Biology":
                    return `<svg class="svg-style article-box__svg" shape-rendering="geometricPrecision" text-rendering="geometricPrecision" image-rendering="optimizeQuality" fill-rule="evenodd" clip-rule="evenodd" viewBox="0 0 513.89 512.4">
                    <g id="Layer_x0020_1">
                    <metadata id="CorelCorpID_0Corel-Layer"/>
                    <path fill-rule="nonzero" d="M115.82 496.61c16.08,-21.9 23.85,-41.68 27.08,-62.84 2.24,-14.62 2.4,-30.2 1.65,-47.69l8.78 0.45 0 -0.05c5.71,0.41 11.56,0.59 17.29,0.88l0.53 0.02c0.7,18.07 0.42,34.48 -2.02,50.43 -3.88,25.36 -13.04,48.86 -31.93,74.59l-21.38 -15.79zm-46.9 -123.72l59.4 59.4 -5.01 23.84 -76.66 -76.66c-10.51,4.1 -20.72,9.65 -30.56,17.11l-16.09 -21.08c49.36,-37.43 102.43,-34.69 155.59,-31.95 6,0.31 12,0.62 16.82,0.83 21.05,0.9 41.94,1.07 61.99,-2.26l-52.97 -52.97 5 -23.85 71.12 71.11c14.12,-4.75 27.91,-11.99 41.25,-22.85l-99.68 -99.67c-17.99,19.58 -26.37,41.02 -29.83,63.81 -2.41,15.85 -2.49,32.61 -1.73,49.96l-10.21 -0.52c-0.58,-0.06 -1.16,-0.09 -1.76,-0.09 -4.88,-0.25 -9.75,-0.5 -14.63,-0.72 -0.72,-17.93 -0.51,-35.48 2.1,-52.67 4.3,-28.35 15.02,-55.1 38.41,-79.69 24.96,-26.25 51.67,-39.99 79.32,-46.87 21.97,-5.47 44.11,-6.51 66.29,-6.09 0.31,5.24 0.67,10.62 1.06,16.17 0.25,3.49 0.49,6.96 0.72,10.42 -16.87,-0.4 -33.55,0.02 -49.68,2.74l54.11 54.11 -5.01 23.84 -72.21 -72.21c-14.44,4.9 -28.55,12.41 -42.17,23.74l99.82 99.82c18.71,-19.89 27.35,-41.71 30.88,-64.93 3.72,-24.46 1.9,-51.11 -0.04,-78.72 -2.19,-31.17 -3.56,-56.83 0.2,-81.4 3.88,-25.35 13.04,-48.86 31.93,-74.59l21.37 15.8c-16.07,21.9 -23.84,41.68 -27.08,62.83 -3.35,21.93 -2.04,46.04 0.02,75.45 2.05,29.19 3.97,57.37 -0.17,84.67 -4.31,28.35 -15.02,55.09 -38.41,79.69 -24.96,26.25 -51.67,39.99 -79.32,46.87 -27.09,6.74 -54.43,6.76 -81.79,5.59 -6.48,-0.28 -11.8,-0.55 -17.11,-0.83 -28.93,-1.49 -57.83,-2.98 -85.28,2.82zm373.73 -232.9l-57.36 -57.36 5.01 -23.84 74.92 74.92c11.21,-4.17 22.11,-9.95 32.58,-17.89l16.09 21.09c-39.99,30.31 -82.39,34.28 -125.31,33.23 -0.36,-5.72 -0.76,-11.46 -1.16,-17.25 -0.23,-3.19 -0.44,-6.31 -0.64,-9.38 18.96,0.52 37.72,0.04 55.87,-3.52z"/>
                    </g>
                    </svg>`;
                case "Quantitative Finance":
                    return `<svg class="svg-style article-box__svg" viewBox="0 122.4 488.5 243.7">
                    <g>
                        <path d="M0,331.9V156.5c0-18.8,15.3-34.1,34.1-34.1h325.2c18.8,0,34.1,15.3,34.1,34.1v10.3h-22.6c-11.8,0-21.3,9.6-21.3,21.3v5.7   c-16.1-3-28.2-17-28.2-33.9c0-2.9,0.4-5.7,1-8.4H69.1c0.4,2.1,0.6,4.2,0.6,6.3c0,19.1-15.5,34.5-34.5,34.5c-2.1,0-4.1-0.2-6.1-0.5   v104.8c2-0.3,4-0.5,6.1-0.5c19.1,0,34.5,15.4,34.5,34.5c0,2.2-0.2,4.3-0.6,6.3h212l-0.1,12.4v13.4c0,1.1,0.2,2.3,0.3,3.4H34.1   C15.3,366,0,350.7,0,331.9z M415.9,345.9h-45.2c-1.9,0-3.4,1.5-3.4,3.4v13.4c0,1.9,1.5,3.4,3.4,3.4h45.2c1.9,0,3.4-1.5,3.4-3.4   v-13.5C419.3,347.4,417.8,345.9,415.9,345.9z M415.9,319h-45.2c-1.9,0-3.4,1.5-3.4,3.4v13.4c0,1.9,1.5,3.4,3.4,3.4h45.2   c1.9,0,3.4-1.5,3.4-3.4v-13.4C419.3,320.5,417.8,319,415.9,319z M415.9,292.2h-45.2c-1.9,0-3.4,1.5-3.4,3.4V309   c0,1.9,1.5,3.4,3.4,3.4h45.2c1.9,0,3.4-1.5,3.4-3.4v-13.4C419.3,293.7,417.8,292.2,415.9,292.2z M415.9,265.3h-45.2   c-1.9,0-3.4,1.5-3.4,3.4v13.4c0,1.9,1.5,3.4,3.4,3.4h45.2c1.9,0,3.4-1.5,3.4-3.4v-13.4C419.3,266.8,417.8,265.3,415.9,265.3z    M415.9,238.5h-45.2c-1.9,0-3.4,1.5-3.4,3.4v13.3c0,1.9,1.5,3.4,3.4,3.4h45.2c1.9,0,3.4-1.5,3.4-3.4v-13.4   C419.3,240,417.8,238.5,415.9,238.5z M415.9,211.6h-45.2c-1.9,0-3.4,1.5-3.4,3.4v13.4c0,1.9,1.5,3.4,3.3,3.4h45.2   c1.9,0,3.4-1.5,3.4-3.4V215C419.3,213.1,417.8,211.6,415.9,211.6z M415.9,184.8h-45.2c-1.9,0-3.4,1.5-3.4,3.4v13.4   c0,1.9,1.5,3.4,3.4,3.4h45.2c1.9,0,3.4-1.5,3.4-3.4v-13.4C419.3,186.3,417.8,184.8,415.9,184.8z M485.1,345.9h-45.2   c-1.9,0-3.4,1.5-3.4,3.4v13.4c0,1.9,1.5,3.4,3.4,3.4h45.2c1.9,0,3.4-1.5,3.4-3.4v-13.5C488.4,347.4,486.9,345.9,485.1,345.9z    M485.1,319h-45.2c-1.9,0-3.4,1.5-3.4,3.4v13.4c0,1.9,1.5,3.4,3.4,3.4h45.2c1.9,0,3.4-1.5,3.4-3.4v-13.4   C488.4,320.5,486.9,319,485.1,319z M485.1,292.2h-45.2c-1.9,0-3.4,1.5-3.4,3.4V309c0,1.9,1.5,3.4,3.4,3.4h45.2   c1.9,0,3.4-1.5,3.4-3.4v-13.4C488.4,293.7,486.9,292.2,485.1,292.2z M346.8,345.9h-45.2c-1.9,0-3.4,1.5-3.4,3.4v13.4   c0,1.9,1.5,3.4,3.4,3.4h45.2c1.9,0,3.4-1.5,3.4-3.4v-13.5C350.2,347.4,348.7,345.9,346.8,345.9z M350.2,322.4   c0-1.9-1.5-3.4-3.4-3.4h-45.2c-1.9,0-3.4,1.5-3.4,3.4v13.4c0,1.9,1.5,3.4,3.4,3.4h45.2c1.9,0,3.4-1.5,3.4-3.4V322.4z M350.2,295.6   c0-1.9-1.5-3.4-3.4-3.4h-45.2c-1.9,0-3.4,1.5-3.4,3.4V309c0,1.9,1.5,3.4,3.4,3.4h45.2c1.9,0,3.4-1.5,3.4-3.4V295.6z M350.2,268.7   c0-1.9-1.5-3.4-3.4-3.4h-45.2c-1.9,0-3.4,1.5-3.4,3.4v13.4c0,1.9,1.5,3.4,3.4,3.4h45.2c1.9,0,3.4-1.5,3.4-3.4V268.7z M350.2,241.8   c0-1.9-1.5-3.4-3.4-3.4h-45.2c-1.9,0-3.4,1.5-3.4,3.4v13.4c0,1.9,1.5,3.4,3.4,3.4h45.2c1.9,0,3.4-1.5,3.4-3.4V241.8z M196.7,169.5   c41.2,0,74.7,33.4,74.7,74.7c0,41.2-33.4,74.7-74.7,74.7S122,285.5,122,244.2C122,203,155.4,169.5,196.7,169.5z M203.2,188.7h-8.5   c-1.3,0-2.3,1-2.3,2.3v10.2c-6.5,0.9-11.7,3.3-15.8,7.2c-4.4,4.3-6.7,9.7-6.7,16.3c0,7.3,2.1,12.8,6.3,16.5   c4.2,3.8,10.9,7.5,20,11.1c3.8,1.6,6.4,3.3,7.9,5c1.5,1.7,2.2,4.1,2.2,7.1c0,2.6-0.7,4.8-2.2,6.4c-1.4,1.6-3.6,2.5-6.4,2.5   c-3.3,0-6.1-1.1-8.2-3.2c-1.7-1.7-2.7-4.4-3-8c-0.1-1.4-1.4-2.4-2.8-2.4l-14,0.3c-1.5,0-2.8,1.3-2.7,2.8c0.4,7.4,2.8,13.1,7.2,17.2   c4.8,4.4,10.8,7,18,7.8v9.6c0,1.3,1.1,2.3,2.3,2.3h8.5c1.3,0,2.3-1.1,2.3-2.3v-9.8c5.8-1.1,10.4-3.3,14.1-6.8   c4.3-4.1,6.4-9.6,6.4-16.3c0-7.1-2.1-12.6-6.4-16.4c-4.2-3.8-10.9-7.7-19.9-11.5c-3.9-1.7-6.5-3.4-8-5.1c-1.4-1.7-2.1-3.9-2.1-6.5   s0.7-4.8,2-6.5s3.4-2.6,6.1-2.6c2.7,0,4.9,1,6.5,3.1c1.3,1.7,2.1,4,2.4,7.1c0.1,1.4,1.4,2.4,2.8,2.4l14-0.2c1.5,0,2.8-1.3,2.7-2.8   c-0.4-6.1-2.3-11.2-5.9-15.4c-3.7-4.3-8.6-7-14.7-8.3v-10.6C205.6,189.7,204.5,188.7,203.2,188.7z M67.4,244.2   c0,11.4,9.3,20.7,20.7,20.7s20.7-9.3,20.7-20.7c0-11.4-9.3-20.7-20.7-20.7S67.4,232.8,67.4,244.2z"/>
                    </g>
                    </svg>`;
                case "Statistics":
                    return `<svg class="svg-style article-box__svg"  viewBox="0 35.62 459.75 388.51">
                    <g>
                        <path d="M447.652,304.13h-40.138c-6.681,0-12.097,5.416-12.097,12.097v95.805c0,6.681,5.416,12.098,12.097,12.098h40.138   c6.681,0,12.098-5.416,12.098-12.098v-95.805C459.75,309.546,454.334,304.13,447.652,304.13z"/>
                        <path d="M348.798,258.13H308.66c-6.681,0-12.098,5.416-12.098,12.097v141.805c0,6.681,5.416,12.098,12.098,12.098h40.138   c6.681,0,12.097-5.416,12.097-12.098V270.228C360.896,263.546,355.48,258.13,348.798,258.13z"/>
                        <path d="M151.09,304.13h-40.138c-6.681,0-12.097,5.416-12.097,12.097v95.805c0,6.681,5.416,12.098,12.097,12.098h40.138   c6.681,0,12.098-5.416,12.098-12.098v-95.805C163.188,309.546,157.771,304.13,151.09,304.13z"/>
                        <path d="M52.236,258.13H12.098C5.416,258.13,0,263.546,0,270.228v141.805c0,6.681,5.416,12.098,12.098,12.098h40.138   c6.681,0,12.097-5.416,12.097-12.098V270.228C64.333,263.546,58.917,258.13,52.236,258.13z"/>
                        <path d="M249.944,196.968h-40.138c-6.681,0-12.098,5.416-12.098,12.098v202.967c0,6.681,5.416,12.098,12.098,12.098h40.138   c6.681,0,12.098-5.416,12.098-12.098V209.066C262.042,202.384,256.625,196.968,249.944,196.968z"/>
                        <path d="M436.869,244.62c8.14,0,15-6.633,15-15v-48.479c0-8.284-6.716-15-15-15c-8.284,0-15,6.716-15,15v12.119L269.52,40.044   c-3.148-3.165-7.536-4.767-11.989-4.362c-4.446,0.403-8.482,2.765-11.011,6.445L131.745,209.185L30.942,144.969   c-6.987-4.451-16.26-2.396-20.71,4.592c-4.451,6.987-2.396,16.259,4.592,20.71l113.021,72c2.495,1.589,5.286,2.351,8.046,2.351   c4.783,0,9.475-2.285,12.376-6.507L261.003,74.025L400.8,214.62h-12.41c-8.284,0-15,6.716-15,15c0,8.284,6.716,15,15,15   c6.71,0,41.649,0,48.443,0H436.869z"/>
                    </g>
                    </svg>`;
                case "Electrical Engineering and Systems Science":
                    return `<svg class="svg-style article-box__svg"   viewBox="0 0 122.88 121.2"><g><path d="M11.27,0h100.34c3.1,0,5.92,1.27,7.96,3.31c2.04,2.04,3.31,4.86,3.31,7.96v98.66c0,3.14-1.6,5.94-3.94,7.96 c-2.37,2.04-5.58,3.31-8.64,3.31H11.27c-3.1,0-5.92-1.27-7.96-3.31C1.27,115.85,0,113.03,0,109.93V11.27 c0-3.09,1.27-5.91,3.31-7.95l0.01-0.01C5.36,1.27,8.18,0,11.27,0L11.27,0z M61.22,52.51c2.84,0,5.41,1.15,7.26,3.01 c1.86,1.86,3.01,4.43,3.01,7.26c0,2.84-1.15,5.41-3.01,7.26c-1.19,1.19-2.67,2.09-4.32,2.58v42.19h16.23V78.13 c0-0.88,0.38-1.66,0.99-2.2l9.47-9.72c-0.73-1.41-1.15-3.02-1.15-4.73c0-2.84,1.15-5.41,3.01-7.26c1.86-1.86,4.43-3.01,7.26-3.01 c2.84,0,5.41,1.15,7.27,3.01c1.86,1.86,3.01,4.43,3.01,7.26c0,2.84-1.15,5.41-3.01,7.27c-1.86,1.86-4.43,3.01-7.27,3.01 c-1.83,0-3.56-0.48-5.05-1.32l-8.65,8.88v35.51h24.02c1.55,0,3.21-0.68,4.48-1.77c1.03-0.88,1.72-1.99,1.72-3.12V11.27 c0-1.34-0.55-2.56-1.44-3.45c-0.89-0.89-2.11-1.44-3.45-1.44H84.7v9.96c1.65,0.49,3.13,1.39,4.32,2.58 c1.86,1.86,3.01,4.43,3.01,7.27c0,2.84-1.15,5.41-3.01,7.26c-1.86,1.86-4.43,3.01-7.26,3.01c-2.84,0-5.41-1.15-7.26-3.01 c-1.86-1.86-3.01-4.43-3.01-7.26c0-2.84,1.15-5.41,3.01-7.27l0.16-0.15c1.16-1.11,2.58-1.96,4.16-2.43V6.38H57.91v22.98 c0,1.63-1.32,2.94-2.94,2.94H47.4c-0.47,1.77-1.41,3.36-2.66,4.62c-1.86,1.86-4.43,3.01-7.26,3.01c-2.84,0-5.41-1.15-7.26-3.01 c-1.86-1.86-3.01-4.43-3.01-7.26c0-2.84,1.15-5.41,3.01-7.26c1.86-1.86,4.43-3.01,7.26-3.01c2.84,0,5.41,1.15,7.26,3.01 c1.12,1.12,1.98,2.49,2.49,4.03h4.8V6.38H11.27c-1.35,0-2.57,0.55-3.46,1.43C6.93,8.7,6.38,9.92,6.38,11.27v98.66 c0,1.34,0.55,2.56,1.44,3.45c0.89,0.89,2.11,1.44,3.45,1.44h24.99V91.61l-4.56-4.22c-1.43,0.75-3.05,1.18-4.78,1.18 c-2.84,0-5.41-1.15-7.26-3.01c-1.86-1.86-3.01-4.43-3.01-7.26c0-2.84,1.15-5.41,3.01-7.26c1.86-1.86,4.43-3.01,7.26-3.01 c2.84,0,5.41,1.15,7.26,3.01c1.86,1.86,3.01,4.43,3.01,7.26c0,1.82-0.47,3.52-1.3,5l5.08,4.7c0.71,0.54,1.17,1.39,1.17,2.35v24.48 h16.13V72.63c-1.65-0.49-3.13-1.39-4.32-2.58c-1.86-1.86-3.01-4.43-3.01-7.26c0-2.84,1.15-5.41,3.01-7.26 C55.82,53.66,58.39,52.51,61.22,52.51L61.22,52.51z M41.18,25.95c-0.95-0.95-2.26-1.54-3.71-1.54c-1.45,0-2.76,0.59-3.71,1.54 c-0.95,0.95-1.54,2.26-1.54,3.71c0,1.45,0.59,2.76,1.54,3.71s2.26,1.54,3.71,1.54c1.45,0,2.76-0.59,3.71-1.54 c0.95-0.95,1.54-2.26,1.54-3.71C42.72,28.21,42.13,26.9,41.18,25.95L41.18,25.95z M85.47,22.47c-0.95-0.95-2.26-1.54-3.71-1.54 c-1.4,0-2.67,0.54-3.61,1.43l-0.1,0.11c-0.95,0.95-1.54,2.26-1.54,3.71c0,1.45,0.59,2.76,1.54,3.71c0.95,0.95,2.26,1.54,3.71,1.54 c1.45,0,2.76-0.59,3.71-1.54c0.95-0.95,1.54-2.26,1.54-3.71C87,24.73,86.42,23.42,85.47,22.47L85.47,22.47z M26.92,73.04 c-1.45,0-2.76,0.59-3.71,1.54c-0.95,0.95-1.54,2.26-1.54,3.71c0,1.45,0.59,2.76,1.54,3.71c0.95,0.95,2.26,1.54,3.71,1.54 c1.45,0,2.76-0.59,3.71-1.54c0.95-0.95,1.54-2.26,1.54-3.71c0-1.45-0.59-2.76-1.54-3.71C29.68,73.63,28.37,73.04,26.92,73.04 L26.92,73.04z M103.69,57.77c-0.95-0.95-2.26-1.54-3.71-1.54c-1.45,0-2.76,0.59-3.71,1.54c-0.95,0.95-1.54,2.26-1.54,3.71 c0,1.45,0.59,2.76,1.54,3.71c0.95,0.95,2.26,1.54,3.71,1.54c1.45,0,2.76-0.59,3.71-1.54c0.95-0.95,1.54-2.26,1.54-3.71 C105.22,60.03,104.64,58.72,103.69,57.77L103.69,57.77z M64.93,59.08c-0.95-0.95-2.26-1.54-3.71-1.54c-1.45,0-2.76,0.59-3.71,1.54 c-0.95,0.95-1.54,2.26-1.54,3.71c0,1.45,0.59,2.76,1.54,3.71c0.95,0.95,2.26,1.54,3.71,1.54c1.45,0,2.76-0.59,3.71-1.54 c0.95-0.95,1.54-2.26,1.54-3.71C66.47,61.34,65.88,60.03,64.93,59.08L64.93,59.08z"/></g></svg>`;
                case "Economics":
                    return `<svg class="svg-style article-box__svg"  enable-background="new 0 0 76.00 76.00" baseProfile="full" version="1.1" viewBox="15.83 15.83 44.33 44.33" xml:space="preserve" xmlns="http://www.w3.org/2000/svg">
                    <path d="m38 15.833c12.242 0 22.167 9.9244 22.167 22.167s-9.9244 22.167-22.167 22.167-22.167-9.9244-22.167-22.167 9.9244-22.167 22.167-22.167zm-18.935 20.583h6.3001c0.1057-2.6207 0.4717-5.1156 1.0531-7.4061-1.4711-0.5161-2.8286-1.1275-4.0463-1.8193-1.8438 2.6609-3.0256 5.8155-3.3069 9.2254zm10.989-15.68c-2.1572 0.9945-4.0962 2.3814-5.7255 4.0693 0.9074 0.47 1.9109 0.8933 2.9946 1.2621 0.7408-2.0258 1.6647-3.8267 2.7309-5.3314zm6.3626 15.68v-5.5735c-2.4704-0.0996-4.8289-0.4306-7.0098-0.9551-0.4748 2.0081-0.7787 4.2093-0.8744 6.5286h7.8842zm0-17.154c-2.5143 0.8436-4.6936 3.6624-6.1256 7.6312 1.8983 0.4218 3.9604 0.6926 6.1256 0.7819v-8.4131zm20.518 17.154c-0.2813-3.4099-1.463-6.5644-3.3068-9.2254-1.2177 0.6918-2.5753 1.3033-4.0463 1.8194 0.5813 2.2904 0.9473 4.7853 1.053 7.406h6.3001zm-10.989-15.68c1.0661 1.5047 1.99 3.3057 2.7308 5.3314 1.0838-0.3688 2.0872-0.7921 2.9947-1.2621-1.6293-1.6879-3.5683-3.0748-5.7255-4.0693zm-6.3626 15.68h7.8841c-0.0956-2.3193-0.3996-4.5205-0.8743-6.5286-2.1809 0.5245-4.5395 0.8555-7.0098 0.9551v5.5735zm0-17.154v8.4131c2.1651-0.0893 4.2273-0.3601 6.1255-0.7819-1.4319-3.9688-3.6113-6.7875-6.1255-7.6312zm17.352 20.321h-6.3001c-0.1057 2.6206-0.4717 5.1155-1.053 7.406 1.471 0.5161 2.8286 1.1275 4.0463 1.8193 1.8438-2.6609 3.0255-5.8155 3.3068-9.2253zm-10.989 15.68c2.1572-0.9946 4.0962-2.3815 5.7255-4.0694-0.9074-0.47-1.9109-0.8933-2.9947-1.2621-0.7408 2.0258-1.6647 3.8268-2.7308 5.3315zm-6.3626-15.68v5.5734c2.4703 0.0996 4.8289 0.4306 7.0098 0.9551 0.4747-2.0081 0.7787-4.2092 0.8744-6.5285h-7.8842zm0 17.154c2.5142-0.8436 4.6936-3.6623 6.1256-7.6312-1.8983-0.4218-3.9605-0.6926-6.1256-0.7819v8.4131zm-20.518-17.154c0.2813 3.4098 1.4631 6.5644 3.3069 9.2253 1.2177-0.6918 2.5752-1.3032 4.0463-1.8193-0.5814-2.2905-0.9474-4.7854-1.0531-7.406h-6.3001zm10.989 15.68c-1.0661-1.5047-1.99-3.3057-2.7309-5.3315-1.0837 0.3688-2.0872 0.7921-2.9946 1.2622 1.6293 1.6878 3.5683 3.0748 5.7255 4.0693zm6.3626-15.68h-7.8842c0.0957 2.3193 0.3996 4.5205 0.8744 6.5285 2.1809-0.5245 4.5394-0.8555 7.0098-0.9551v-5.5734zm0 17.154v-8.4131c-2.1652 0.0893-4.2274 0.3601-6.1256 0.7819 1.432 3.9689 3.6113 6.7876 6.1256 7.6312z" stroke-linejoin="round" stroke-width=".2"/>
                </svg>`;
                default:
                    return ``;
            }
        }

        // Attach event listeners
        searchInput.addEventListener("input", articleSearch); // Listen for search input
        searchInput.addEventListener("input", deleteDialog); // Listen for search input
        domainFilter.addEventListener("change", articleSearch); // Listen for dropdown changes
        
    });
    const manualSearch = debounceSearch(articleSearch, 300);